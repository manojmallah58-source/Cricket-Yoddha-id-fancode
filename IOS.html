<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OFFICIAL FANCODE LIVE VIDEO PLAYER ðŸ”¥ | WATCH FREE HD CRICKET, FOOTBALL & SPORTS ONLINE | 24/7 HLS STREAMING </title>
    <meta name="description" content="WATCH ALL FANCODE LIVE STREAMS, INCLUDING HD CRICKET, FOOTBALL, AND KABADDI, ON OUR CUSTOM HLS PLAYER. FREE, SMOOTH, AND SECURE LIVE SPORTS STREAMING .CRICKET NEWS POINT ðŸ”¥ OFFICIAL FANCODE LIVE ðŸ”¥ | WATCH FREE HD CRICKET, FOOTBALL & SPORTS ONLINE | 24/7 HLS STREAMING">
</head>
<body>
    <script>
        // The encrypted string is injected here:
        let encrypted = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIj4KCjx0aXRsZT5PRkZJQ0lBTCBGQU5DT0RFIExJVkUgU1RSRUFNIFBMQVlFUiB/IHwgV0FUQ0ggRlJFRSBIRCBDUklDS0VULCBGT09UQkFMTCAmIFNQT1JUUyBPTkxJTkUgfCAyNC83IEhMUyBTVFJFQU1JTkc8L3RpdGxlPgoKPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9IldBVENIIEFMTCBGQU5DT0RFIExJVkUgU1RSRUFNUywgSU5DTFVESU5HIEhEIENSSUNLRVQsIEZPT1RCQUxMLCBBTkQgS0FCQURESSwgT04gT1VSIENVU1RPTSBITFMgUExBWUVSLiBGUkVFLCBTTU9PVEgsIEFORCBTRUNVUkUgTElWRSBTUE9SVFMgU1RSRUFNSU5HLiI+Cgo8bWV0YSBuYW1lPSJyZWZlcnJlciIgY29udGVudD0ibm8tcmVmZXJyZXIiIC8+Cgo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLnBseXIuaW8vMy43LjgvcGx5ci5jc3MiIC8+Cgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20iIGNyb3Nzb3JpZ2luPgo8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUFtYXJhbnRoOml0YWwsd2dodEAwLDQwMDswLDcwMDsxLDcwMCZmYW1pbHk9QmViYXMrTmV1ZSZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+Cgo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjQuMC9jc3MvYWxsLm1pbi5jc3MiPgoKPHN0eWxlPgo6cm9vdCB7CiAgICAtLWJnLWNvbG9yOiAjMTIxMjEyOwogICAgLS1wcmltYXJ5LWNvbG9yOiAjZTMwMDAwOyAvKiBSZWQgQWNjZW50ICovCiAgICAtLXByaW1hcnktY29sb3ItZGFyazogI2IzMDAwMDsKICAgIC0tY2FyZC1iZzogIzFlMWUxZTsKICAgIC0tdGV4dC1saWdodDogI2YxZjVmOTsKICAgIC0tdGV4dC1tdXRlZDogIzk0YTNiODsKICAgIC0tYm9yZGVyLWNvbG9yOiAjMmQyZDJkOwogICAgLS1wb3B1cC1iZzogIzAwMDAwMDsKICAgIC0tcG9wdXAtc2hhZG93LWNvbG9yOiByZ2JhKDIyNywgMCwgMCwgMC40KTsKICAgIC0tcGx5ci1jb2xvci1tYWluOiAjMGVhNWU5OyAvKiBCbHVlIGZvciBQbHlyIHByb2dyZXNzIGJhciAqLwp9CiogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0KaHRtbCxib2R5e2hlaWdodDoxMDAlfQpib2R5IHsKICAgIGZvbnQtZmFtaWx5OiAnQW1hcmFudGgnLCBzYW5zLXNlcmlmOwogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOwogICAgY29sb3I6IHZhcigtLXRleHQtbGlnaHQpOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgIHBhZGRpbmc6IDFyZW07CiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZTsKfQouY29udGFpbmVyIHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWF4LXdpZHRoOiA4MDBweDsKICAgIG9wYWNpdHk6IDA7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjBweCk7CiAgICBhbmltYXRpb246IGZhZGVJbiAwLjVzIGVhc2Utb3V0IGZvcndhcmRzOwp9CkBrZXlmcmFtZXMgZmFkZUluIHsgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQoKLmNvbnRlbnQtaGlkZGVuIC5jb250YWluZXIgewogICAgb3BhY2l0eTogMCAhaW1wb3J0YW50OwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5zdHJlYW0taGVhZGVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhcmQtYmcpOwogICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgIHBhZGRpbmc6IDAuNzVyZW0gMS4yNXJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIG1hcmdpbi1ib3R0b206IDFyZW07Cn0KLnN0cmVhbS1oZWFkZXIgaDEgeyBmb250LXNpemU6IDEuMjVyZW07IGZvbnQtd2VpZ2h0OiA2MDA7IH0KLmxpdmUtYmFkZ2UgewogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAwLjI1cmVtIDAuNzVyZW07CiAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAwLjRyZW07CiAgICBhbmltYXRpb246IHB1bHNlIDEuNXMgaW5maW5pdGU7Cn0KQGtleWZyYW1lcyBwdWxzZSB7CiAgICAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyMjcsIDAsIDAsIDAuNyk7IH0KICAgIDcwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgyMjcsIDAsIDAsIDApOyB9CiAgICAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDIyNywgMCwgMCwgMCk7IH0KfQojcGxheWVyLWNvbnRhaW5lciB7CiAgICB3aWR0aDogMTAwJTsKICAgIC8qIEZpeGVkIGhlaWdodCBmb3IgaW5pdGlhbCBlbWJlZCB2aWV3ICovCiAgICBoZWlnaHQ6IDUwdmg7IAogICAgbWF4LWhlaWdodDogNjAwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOwogICAgYm94LXNoYWRvdzogMCAxMHB4IDI1cHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYm9yZGVyLXJhZGl1czogMTJweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi8qIFBMWVIgRUxFTUVOVCBTVFlMRVMgKi8KI3BsYXllci1jb250YWluZXIgLnBseXIgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICB6LWluZGV4OiAxOwp9CgoucGx5ci0tZnVsbHNjcmVlbi1hY3RpdmUgI3BsYXllci1jb250YWluZXIgewogICAgYm9yZGVyLXJhZGl1czogMDsKfQoKLyogRmFsbGJhY2sgUm90YXRpb24gQ1NTICovCi5yb3RhdGUtZmFsbGJhY2stbm90aWNlewogICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICBsZWZ0OjEycHg7CiAgICBib3R0b206MTJweDsKICAgIHotaW5kZXg6MjIwMDA7CiAgICBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41NSk7CiAgICBjb2xvcjp2YXIoLS10ZXh0LWxpZ2h0KTsKICAgIHBhZGRpbmc6LjRyZW0gLjZyZW07CiAgICBib3JkZXItcmFkaXVzOjhweDsKICAgIGZvbnQtc2l6ZTouOHJlbTsKICAgIGRpc3BsYXk6bm9uZTsKfQoucGxheWVyLXJvdGF0ZWR7CiAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyOwogICAgd2lkdGg6MTAwdmg7CiAgICBoZWlnaHQ6MTAwdnc7CiAgICBwb3NpdGlvbjpmaXhlZDsKICAgIHRvcDo1MCU7CiAgICBsZWZ0OjUwJTsKICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoOTBkZWcpOwogICAgei1pbmRleDoyMTAwMDsKICAgIGJvcmRlci1yYWRpdXM6MDsKfQoucGxheWVyLXJvdGF0ZWQgLnN0cmVhbS1oZWFkZXIsCi5wbGF5ZXItcm90YXRlZCAuaW5mby1jYXJkLAoucGxheWVyLXJvdGF0ZWQgLmJhY2stbGluaywKLnBseXItLWZ1bGxzY3JlZW4tYWN0aXZlIC5zdHJlYW0taGVhZGVyLAoucGx5ci0tZnVsbHNjcmVlbi1hY3RpdmUgLmluZm8tY2FyZCwKLnBseXItLWZ1bGxzY3JlZW4tYWN0aXZlIC5iYWNrLWxpbmsgewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CgoKLmluZm8tY2FyZCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYXJkLWJnKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgcGFkZGluZzogMS4yNXJlbTsKICAgIG1hcmdpbi10b3A6IDFyZW07CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmluZm8tY2FyZCBoMiB7CiAgICBmb250LWZhbWlseTogJ0JlYmFzIE5ldWUnLCBzYW5zLXNlcmlmOwogICAgZm9udC1zaXplOiAxLjI1cmVtOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIG1hcmdpbi1ib3R0b206IDFyZW07CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZ2FwOiAwLjVyZW07CiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7Cn0KLmFjdGlvbi1idXR0b24gewogICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBnYXA6IDAuNzVyZW07CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDAuOHJlbSAxcmVtOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCB2YXIoLS1wcmltYXJ5LWNvbG9yKSwgdmFyKC0tcHJpbWFyeS1jb2xvci1kYXJrKSk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgYm9yZGVyOiBub25lOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZSwgYm94LXNoYWRvdyAwLjJzIGVhc2U7Cn0KLmFjdGlvbi1idXR0b246aG92ZXIgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwogICAgYm94LXNoYWRvdzogMCA2cHggMTVweCB2YXIoLS1wb3B1cC1zaGFkb3ctY29sb3IpOwp9Ci5hY3Rpb24tYnV0dG9uLmNvcGllZCB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzIyYzU1ZSwgIzRhZGU4MCk7IH0KLmJhY2stbGluayB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB3aWR0aDogMTAwJTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIG1hcmdpbi10b3A6IDEuNXJlbTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIHBhZGRpbmc6IDAuNXJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOwp9Ci5iYWNrLWxpbms6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYXJkLWJnKTsgY29sb3I6IHZhcigtLXRleHQtbGlnaHQpOyB9Ci5lcnJvci1tZXNzYWdlIHsKICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgcGFkZGluZzogNHJlbSAxcmVtOwogICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhcmQtYmcpOwogICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgYm9yZGVyLXJhZGl1czogMTJweDsKICAgICBjb2xvcjogdmFyKC0tdGV4dC1saWdodCk7Cn0KLmVycm9yLW1lc3NhZ2UgaDIgeyBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGZvbnQtc2l6ZTogMS41cmVtOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07IH0KCi8qIFZpZXcgQ291bnRlciBTdHlsaW5nIChFeGFjdGx5IGFzIHByb3ZpZGVkKSAqLwoudmlldy1jb3VudGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMTBweDsKICAgIHJpZ2h0OiAxMnB4OwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjU1KTsKICAgIHBhZGRpbmc6IDVweCA5cHg7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICBmb250LXNpemU6IDExcHg7CiAgICBsaW5lLWhlaWdodDogMS4zOwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICB6LWluZGV4OiA5OTk5OwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICBmb250LWZhbWlseTogJ0FtYXJhbnRoJywgc2Fucy1zZXJpZjsKfQoudmlldy1jb3VudGVyIC5uYW1lIHsKICAgIGZvbnQtc2l6ZTogMTBweDsKICAgIG9wYWNpdHk6IDAuODU7Cn0KLnZpZXctY291bnRlciAudmlld3MgewogICAgZm9udC1zaXplOiAxMnB4OwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKLyogLS0tIExvYWRpbmcgT3ZlcmxheSAoQ3VzdG9tIGxhcmdlIGFuZCBwcm9mZXNzaW9uYWwgc3R5bGUpIC0tLSAqLwoubG9hZGluZy1vdmVybGF5IHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGluc2V0OiAwOwogICAgYmFja2dyb3VuZDogdmFyKC0tcG9wdXAtYmcpOyAvKiBVc2UgcHVyZSBibGFjayBmb3IgZnVsbCBkYXJrIGJhY2tncm91bmQgKi8KICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgei1pbmRleDogMTAwMDA7CiAgICBvcGFjaXR5OiAxOwogICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzIGVhc2U7CiAgICBjb2xvcjogI2ZmZjsKfQoKLmxvYWRpbmctb3ZlcmxheS5oaWRkZW4gewogICAgb3BhY2l0eTogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgovKiBNb2Rlcm4gR3JhZGllbnQgTG9hZGVyIChMYXJnZSAtIDEyMHB4KSAqLwoubW9kZXJuLWxvYWRlciB7CiAgICB3aWR0aDogMTIwcHg7CiAgICBoZWlnaHQ6IDEyMHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgcGFkZGluZzogM3B4OwogICAgYmFja2dyb3VuZDogY29uaWMtZ3JhZGllbnQoIzAwMDAgMTAlLCB2YXIoLS1wbHlyLWNvbG9yLW1haW4pKTsKICAgIC13ZWJraXQtbWFzazogcmFkaWFsLWdyYWRpZW50KGZhcnRoZXN0LXNpZGUsICMwMDAwIGNhbGMoMTAwJSAtIDEycHgpLCAjMDAwIDApOwogICAgYW5pbWF0aW9uOiByb3RhdGUgMS41cyBpbmZpbml0ZSBsaW5lYXI7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Owp9Ci5tb2Rlcm4tbG9hZGVyOjpiZWZvcmUgewogICAgY29udGVudDogIiI7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBpbnNldDogMDsKICAgIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7CiAgICBiYWNrZ3JvdW5kOiBjb25pYy1ncmFkaWVudChmcm9tIDE4MGRlZyBhdCA1MCUgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikgMGRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpIDIwZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikgMzYwZGVnKTsKfQpAa2V5ZnJhbWVzIHJvdGF0ZSB7CiAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDF0dXJuKTsgfQp9CgoubG9hZGluZy1vdmVybGF5IHAgewogICAgZm9udC1zaXplOiAxLjZyZW07CiAgICBmb250LXdlaWdodDogNzAwOwogICAgY29sb3I6IHZhcigtLXBseXItY29sb3ItbWFpbik7CiAgICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggcmdiYSgxNCwgMTY1LCAyMzMsIDAuNSk7Cn0KCi8qIFBvcHVwIFN0eWxlcyAoRXhhY3RseSBhcyBwcm92aWRlZCkgKi8KLnBvcHVwLWJhY2tkcm9wewogICAgcG9zaXRpb246Zml4ZWQ7CiAgICB0b3A6MDsKICAgIGxlZnQ6MDsKICAgIHdpZHRoOjEwMCU7CiAgICBoZWlnaHQ6MTAwJTsKICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwxKTsKICAgIHotaW5kZXg6MTEwMDA7CiAgICBkaXNwbGF5Om5vbmU7CiAgICBvcGFjaXR5OjA7CiAgICB0cmFuc2l0aW9uOm9wYWNpdHkgLjI4cyBlYXNlOwp9Ci5wb3B1cC1iYWNrZHJvcC5zaG93ewogICAgZGlzcGxheTpibG9jazsKICAgIG9wYWNpdHk6MTsKfQoKLnRlbGVncmFtLXBvcHVwIHsKICAgIHBvc2l0aW9uOmZpeGVkOwogICAgdG9wOjUwJTsKICAgIGxlZnQ6NTAlOwogICAgdHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpIHNjYWxlKC45Nik7CiAgICBiYWNrZ3JvdW5kOnZhcigtLXBvcHVwLWJnKTsKICAgIGNvbG9yOnZhcigtLXRleHQtbGlnaHQpOwogICAgcGFkZGluZzo0MHB4IDI1cHg7CiAgICBib3JkZXItcmFkaXVzOjE2cHg7CiAgICBib3JkZXI6MnB4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3IpOwogICAgYm94LXNoYWRvdzowIDAgNTBweCAxMHB4IHJnYmEoMjI3LCAwLCAwLCAwLjUpLCAwIDAgMjBweCByZ2JhKDIyNywgMCwgMCwgMC4zKSBpbnNldDsKICAgIHotaW5kZXg6MTIwMDA7CiAgICB0ZXh0LWFsaWduOmNlbnRlcjsKICAgIHdpZHRoOiA5MCU7CiAgICBtYXgtd2lkdGg6IDQwMHB4OwogICAgZGlzcGxheTogbm9uZTsKICAgIG9wYWNpdHk6MDsKICAgIHRyYW5zaXRpb246YWxsIC4yOHMgY3ViaWMtYmV6aWVyKC4yLC45LC4yLDEpOwp9Ci50ZWxlZ3JhbS1wb3B1cC5zaG93eyBkaXNwbGF5OmJsb2NrOyBvcGFjaXR5OjE7IHRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSBzY2FsZSgxKTsgfQoudGVsZWdyYW0tcG9wdXAgaDIgewogICAgbWFyZ2luLXRvcDogMDsKICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsKICAgIGZvbnQtc2l6ZTogMS43NXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggcmdiYSgyMjcsIDAsIDAsIDAuNSk7CiAgICBtYXJnaW4tYm90dG9tOiAwLjc1cmVtOwp9Ci50ZWxlZ3JhbS1wb3B1cCBwIHsKICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsKICAgIG1hcmdpbi1ib3R0b206IDEuNzVyZW07CiAgICBsaW5lLWhlaWdodDogMS41Owp9Ci50ZWxlZ3JhbS1wb3B1cCBidXR0b24gewogICAgd2lkdGg6IDEwMCU7CiAgICBwYWRkaW5nOiAxNHB4OwogICAgbWFyZ2luLXRvcDogMTJweDsKICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7Cn0KLnRlbGVncmFtLXBvcHVwIGJ1dHRvbjpob3ZlciB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMCwgMCwgMCwgMC40KTsKfQoudGVsZWdyYW0tcG9wdXAgLmpvaW4tYnRuIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgdmFyKC0tcHJpbWFyeS1jb2xvciksIHZhcigtLXByaW1hcnktY29sb3ItZGFyaykpOwogICAgY29sb3I6IHdoaXRlOwogICAgYm94LXNoYWRvdzogMCAwIDEycHggcmdiYSgyMjcsIDAsIDAsIDAuNCk7Cn0KLnRlbGVncmFtLXBvcHVwIC5qb2luLWJ0bjpob3ZlciB7CiAgICBib3gtc2hhZG93OiAwIDAgMjVweCByZ2JhKDIyNywgMCwgMCwgMC43KTsKfQoudGVsZWdyYW0tcG9wdXAgLmpvaW5lZC1idG4gewogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3ItZGFyayk7Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgewogICAgLnRlbGVncmFtLXBvcHVwIHsgcGFkZGluZzogMzBweCAyMHB4OyBtYXgtd2lkdGg6IDkwJTsgfQogICAgLnRlbGVncmFtLXBvcHVwIGgyIHsgZm9udC1zaXplOiAxLjVyZW07IH0KICAgIC50ZWxlZ3JhbS1wb3B1cCBwIHsgZm9udC1zaXplOiAwLjlyZW07IH0KfQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPGRpdiBjbGFzcz0ibG9hZGluZy1vdmVybGF5IiBpZD0ibG9hZGluZy1vdmVybGF5Ij4KICAgIDxkaXYgY2xhc3M9Im1vZGVybi1sb2FkZXIiPjwvZGl2PgogICAgPHA+TG9hZGluZyBTdHJlYW0uLi4gUHJlcGFyaW5nIEhEIFF1YWxpdHkuPC9wPgo8L2Rpdj4KCjxkaXYgY2xhc3M9InBvcHVwLWJhY2tkcm9wIiBpZD0icG9wdXBCYWNrZHJvcCI+PC9kaXY+Cgo8bWFpbiBjbGFzcz0iY29udGFpbmVyIj4KICAgIDxkaXYgaWQ9InN0cmVhbS1jb250ZW50Ij4KICAgICAgICA8L2Rpdj4KPC9tYWluPgoKPGRpdiBjbGFzcz0idGVsZWdyYW0tcG9wdXAiIGlkPSJ0ZWxlZ3JhbVBvcHVwIiByb2xlPSJkaWFsb2ciIGFyaWEtbW9kYWw9InRydWUiIGFyaWEtaGlkZGVuPSJ0cnVlIj4KICAgIDxoMj48aSBjbGFzcz0iZmEtYnJhbmRzIGZhLXdoYXRzYXBwIj48L2k+IFN1cHBvcnQgVXMhPC9oMj4KICAgIDxwPkpvaW4gb3VyIFdoYXRzYXBwIGNoYW5uZWwgPHN0cm9uZz5GQU5DT0RFIExJVkUgU1RSRUFNPC9zdHJvbmc+IEZvciBJbnN0YW50IFVwZGF0ZXMgQW5kIEV4Y2x1c2l2ZSBMaW5rcy48L3A+CiAgICA8YSBocmVmPSJodHRwczovL3doYXRzYXBwLmNvbS9jaGFubmVsLzAwMjlWYWV5bFlZQlB6alZOb21XdVowVCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIiIGlkPSJqb2luTGluayI+PGJ1dHRvbiBjbGFzcz0iam9pbi1idG4iPkpvaW4gTm93PC9idXR0b24+PC9hPgogICAgPGJ1dHRvbiBjbGFzcz0iam9pbmVkLWJ0biIgaWQ9ImFscmVhZHlKb2luZWRCdG4iPkFscmVhZHkgSm9pbmVkPC9idXR0b24+CjwvZGl2PgoKPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaGxzLmpzQGxhdGVzdCI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5wbHlyLmlvLzMuNy44L3BseXIuanMiPjwvc2NyaXB0Pgo8c2NyaXB0PgogICAgY29uc3QgUExBWUVSX0lEID0gJ3BsYXllcic7CiAgICAKICAgIC8vIC0tLSBDb25maWd1cmF0aW9uIENvbnN0YW50cyAtLS0KICAgIGNvbnN0IE1BVENIX0RBVEFfVVJMID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kcm1saXZlL2ZhbmNvZGUtbGl2ZS1ldmVudHMvcmVmcy9oZWFkcy9tYWluL2ZhbmNvZGUuanNvbic7CiAgICBjb25zdCBNQVRDSF9JRF9QQVJBTSA9ICdpZCc7CiAgICBjb25zdCBDRE5fS0VZX1BBUkFNID0gJ2Nkbic7CiAgICAKICAgIGNvbnN0IEFVVE9fUVVBTElUWSA9IDA7CiAgICAKICAgIC8vIC0tLSBWaWV3IENvdW50ZXIgQ29uc3RhbnRzIChVcGRhdGVkIGFzIHJlcXVlc3RlZDogU3RhdGljIEtleSkgLS0tCiAgICBjb25zdCBTVEFUSUNfVklFV19LRVkgPSAnRmFuY29kZSBPZmZpY2lhbCc7IC8vICoqUmVxdWVzdGVkIFN0YXRpYyBJRCoqCiAgICBjb25zdCBISVRfQkFTRSA9ICdodHRwczovL1NheWFuY291bnRlci10d28udmVyY2VsLmFwcC9hcGkvaGl0P2tleT0nOwogICAgY29uc3QgR0VUX0JBU0UgPSAnaHR0cHM6Ly9TYXlhbmNvdW50ZXItdHdvLnZlcmNlbC5hcHAvYXBpL2dldD9rZXk9JzsKICAgIAogICAgLy8gLS0tIERPTSBFbGVtZW50cyAtLS0KICAgIGNvbnN0IGxvYWRpbmdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOwogICAgY29uc3QgcG9wdXBCYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cEJhY2tkcm9wJyk7CiAgICBjb25zdCB0ZWxlZ3JhbVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbGVncmFtUG9wdXAnKTsKICAgIGNvbnN0IGpvaW5MaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvaW5MaW5rJyk7CiAgICBjb25zdCBhbHJlYWR5Sm9pbmVkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscmVhZHlKb2luZWRCdG4nKTsKICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5OwogICAgCiAgICBsZXQgcGx5ckluc3RhbmNlID0gbnVsbDsKICAgIGxldCBobHNJbnN0YW5jZSA9IG51bGw7CiAgICBsZXQgcGxheWVySW5pdGlhbGl6ZWQgPSBmYWxzZTsKCiAgICAvLyAtLS0gVXRpbGl0eSBGdW5jdGlvbnMgLS0tCiAgICBmdW5jdGlvbiBzYWZlSFRNTChzdHIpeyBjb25zdCBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGQudGV4dENvbnRlbnQgPSBzdHI7IHJldHVybiBkLmlubmVySFRNTDsgfQogICAgCiAgICBmdW5jdGlvbiBmb3JtYXRWaWV3cyhudW0pIHsKICAgICAgICBpZiAoIW51bSB8fCBpc05hTihudW0pKSByZXR1cm4gIjAiOwogICAgICAgIGlmIChudW0gPj0gMTAwMDAwMCkgcmV0dXJuIChudW0gLyAxMDAwMDAwKS50b0ZpeGVkKDEpICsgIk0iOwogICAgICAgIGlmIChudW0gPj0gMTAwMCkgcmV0dXJuIChudW0gLyAxMDAwKS50b0ZpeGVkKDEpICsgIksiOwogICAgICAgIHJldHVybiBudW07CiAgICB9CgogICAgZnVuY3Rpb24gaGlkZVBvcHVwKCl7CiAgICAgICAgdGVsZWdyYW1Qb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgdGVsZWdyYW1Qb3B1cC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywndHJ1ZScpOwogICAgICAgIHBvcHVwQmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY29udGVudC1oaWRkZW4nKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzaG93UG9wdXAoKXsKICAgICAgICB0ZWxlZ3JhbVBvcHVwLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICB0ZWxlZ3JhbVBvcHVwLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCdmYWxzZScpOwogICAgICAgIHBvcHVwQmFja2Ryb3AuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgnY29udGVudC1oaWRkZW4nKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGlzcGxheUVycm9yKG1lc3NhZ2UpIHsKICAgICAgICBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICBoaWRlUG9wdXAoKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuc3R5bGUub3BhY2l0eSA9ICcxJzsKCiAgICAgICAgY29uc3QgY29udGVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdHJlYW0tY29udGVudCcpOwogICAgICAgIGNvbnRlbnREaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlcnJvci1tZXNzYWdlIj4KICAgICAgICAgICAgICAgIDxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtdHJpYW5nbGUtZXhjbGFtYXRpb24iPjwvaT4gU3RyZWFtIEVycm9yITwvaDI+CiAgICAgICAgICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImJhY2stbGluayI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWFycm93LWxlZnQiPjwvaT4gQmFjayB0byBBbGwgU3RyZWFtczwvYT4KICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICBpZiAocGx5ckluc3RhbmNlKSBwbHlySW5zdGFuY2UuZGVzdHJveSgpOwogICAgfQogICAgCiAgICAvLyAtLS0gQ291bnRlciBMb2dpYyAoVXBkYXRlZCB0byB1c2Ugc3RhdGljIGtleSkgLS0tCiAgICBhc3luYyBmdW5jdGlvbiBzdGFydFZpZXdDb3VudGVyKCkgeyAKICAgICAgICBjb25zdCBTVFJFQU1fS0VZID0gU1RBVElDX1ZJRVdfS0VZOyAvLyBBbHdheXMgdXNlcyB0aGUgc3RhdGljIGtleQogICAgICAgIGNvbnN0IEhJVF9VUkwgPSBISVRfQkFTRSArIFNUUkVBTV9LRVk7CiAgICAgICAgY29uc3QgR0VUX1VSTCA9IEdFVF9CQVNFICsgU1RSRUFNX0tFWTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gU2VuZCBoaXQKICAgICAgICAgICAgYXdhaXQgZmV0Y2goSElUX1VSTCArICImXz0iICsgRGF0ZS5ub3coKSk7CiAgICAgICAgfSBjYXRjaChlKSB7fQoKICAgICAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVWaWV3cygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKEdFVF9VUkwgKyAiJl89IiArIERhdGUubm93KCkpOwogICAgICAgICAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgICAgICBjb25zdCB2aWV3cyA9IGpzb24udG90YWwgfHwgMDsKICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdDb3VudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlld0NvdW50Iik7CiAgICAgICAgICAgICAgICBjb25zdCB2aWV3Q2hhbm5lbE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlld0NoYW5uZWxOYW1lIik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICh2aWV3Q291bnRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgIHZpZXdDb3VudEVsZW1lbnQuaW5uZXJUZXh0ID0gZm9ybWF0Vmlld3MoTnVtYmVyKHZpZXdzKSkgKyAiIFZpZXdzIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgZGlzcGxheSBuYW1lIHRvIHRoZSBzdGF0aWMga2V5CiAgICAgICAgICAgICAgICBpZiAodmlld0NoYW5uZWxOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgdmlld0NoYW5uZWxOYW1lLmlubmVyVGV4dCA9IFNUQVRJQ19WSUVXX0tFWTsgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlld0NvdW50IikpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlld0NvdW50IikuaW5uZXJUZXh0ID0gIjAgVmlld3MiOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdXBkYXRlVmlld3MoKTsKICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVWaWV3cywgMjAwMCk7CiAgICB9CiAgICAKICAgIC8vIC0tLSBEYXRhIEZldGNoaW5nIExvZ2ljIC0tLQogICAgZnVuY3Rpb24gZ2V0TWF0Y2hQYXJhbXMoKSB7CiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICBjb25zdCBtYXRjaElkID0gdXJsUGFyYW1zLmdldChNQVRDSF9JRF9QQVJBTSk7CiAgICAgICAgY29uc3QgY2RuS2V5ID0gdXJsUGFyYW1zLmdldChDRE5fS0VZX1BBUkFNKTsKICAgICAgICByZXR1cm4geyBtYXRjaElkLCBjZG5LZXkgfTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaE1hdGNoRGF0YShtYXRjaElkLCBjZG5LZXkpIHsKICAgICAgICBpZiAoIW1hdGNoSWQpIHRocm93IG5ldyBFcnJvcigiTWlzc2luZyBNYXRjaCBJRCBpbiBVUkwuIik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKE1BVENIX0RBVEFfVVJMLCB7IGNhY2hlOiAibm8tc3RvcmUiIH0pOwogICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGxvYWQgZmFpbGVkJyk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAoZGF0YS5tYXRjaGVzIHx8IFtdKS5maW5kKG0gPT4gbS5tYXRjaF9pZCA9PT0gTnVtYmVyKG1hdGNoSWQpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghbWF0Y2gpIHRocm93IG5ldyBFcnJvcihgTWF0Y2ggd2l0aCBJRCAke21hdGNoSWR9IG5vdCBmb3VuZC5gKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBzdHJlYW1VcmwgPSBudWxsOwogICAgICAgICAgICBsZXQgbWF0Y2hOYW1lID0gbWF0Y2gubWF0Y2hfbmFtZSB8fCBtYXRjaC50aXRsZSB8fCAiTElWRSBTVFJFQU0iOwoKICAgICAgICAgICAgaWYgKGNkbktleSA9PT0gJ2FkZnJlZScpIHsKICAgICAgICAgICAgICAgIHN0cmVhbVVybCA9IG1hdGNoLmFkZnJlZV91cmw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdHJlYW1VcmwgPSBtYXRjaC5kYWlfdXJsIHx8IG1hdGNoLm0zdTggfHwgbWF0Y2guc3JjOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbVVybCkgdGhyb3cgbmV3IEVycm9yKGBObyBzdHJlYW0gVVJMIGZvdW5kIGZvciB0aGUgc2VsZWN0ZWQgQ0ROLmApOwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHsgc3RyZWFtVXJsLCBtYXRjaE5hbWUsIG1hdGNoSWQgfTsKCiAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfQoKICAgIC8vIC0tLSBQbGF5ZXIgTG9naWMgKE9yaWVudGF0aW9uIExvY2spIC0tLQogICAgYXN5bmMgZnVuY3Rpb24gbG9ja0xhbmRzY2FwZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCdvcmllbnRhdGlvbicgaW4gc2NyZWVuICYmIHNjcmVlbi5vcmllbnRhdGlvbiAmJiBzY3JlZW4ub3JpZW50YXRpb24ubG9jaykgewogICAgICAgICAgICBhd2FpdCBzY3JlZW4ub3JpZW50YXRpb24ubG9jaygibGFuZHNjYXBlIik7CiAgICAgICAgICAgIHJldHVybiB7IGxvY2tlZDogdHJ1ZSwgbWV0aG9kOiAnc2NyZWVuLm9yaWVudGF0aW9uLmxvY2snIH07CiAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5zY3JlZW4gJiYgd2luZG93LnNjcmVlbi5sb2NrT3JpZW50YXRpb24pIHsKICAgICAgICAgICAgbGV0IG9rID0gd2luZG93LnNjcmVlbi5sb2NrT3JpZW50YXRpb24oJ2xhbmRzY2FwZScpOwogICAgICAgICAgICByZXR1cm4geyBsb2NrZWQ6ICEhb2ssIG1ldGhvZDogJ3NjcmVlbi5sb2NrT3JpZW50YXRpb24nIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4geyBsb2NrZWQ6IGZhbHNlLCByZWFzb246ICduby1hcGknIH07CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS53YXJuKCJPcmllbnRhdGlvbiBsb2NrIGZhaWxlZDoiLCBlKTsKICAgICAgICAgIHJldHVybiB7IGxvY2tlZDogZmFsc2UsIGVycm9yOiBlIH07CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVtb3ZlUm90YXRlQ3NzRmFsbGJhY2soKXsKICAgICAgICBjb25zdCBwYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXItY29udGFpbmVyJyk7CiAgICAgICAgaWYoIXBjKSByZXR1cm47CiAgICAgICAgcGMuY2xhc3NMaXN0LnJlbW92ZSgncGxheWVyLXJvdGF0ZWQnKTsKICAgICAgICBjb25zdCBub3RpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucm90YXRlLWZhbGxiYWNrLW5vdGljZScpOwogICAgICAgIGlmKG5vdGljZSkgbm90aWNlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9CiAgICBmdW5jdGlvbiBhcHBseVJvdGF0ZUNzc0ZhbGxiYWNrKCl7CiAgICAgICAgY29uc3QgcGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLWNvbnRhaW5lcicpOwogICAgICAgIGlmKCFwYykgcmV0dXJuOwogICAgICAgIHBjLmNsYXNzTGlzdC5hZGQoJ3BsYXllci1yb3RhdGVkJyk7CiAgICAgICAgY29uc3Qgbm90aWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJvdGF0ZS1mYWxsYmFjay1ub3RpY2UnKTsKICAgICAgICBpZihub3RpY2UpIG5vdGljZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgIH0KICAgIGFzeW5jIGZ1bmN0aW9uIG9uRnVsbFNjcmVlbkNoYW5nZSgpIHsKICAgICAgICBjb25zdCBmc0VsZW1lbnQgPSBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50OwogICAgICAgIAogICAgICAgIGlmIChmc0VsZW1lbnQpIHsKICAgICAgICAgICAgY29uc3QgbG9ja1JlcyA9IGF3YWl0IGxvY2tMYW5kc2NhcGUoKTsKICAgICAgICAgICAgaWYgKCFsb2NrUmVzLmxvY2tlZCkgewogICAgICAgICAgICAgICAgYXBwbHlSb3RhdGVDc3NGYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBhd2FpdCBzY3JlZW4ub3JpZW50YXRpb24udW5sb2NrKCk7CiAgICAgICAgICAgICAgICByZW1vdmVSb3RhdGVDc3NGYWxsYmFjaygpOwogICAgICAgICAgICB9LCAxMDApOyAKICAgICAgICB9CiAgICB9CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIG9uRnVsbFNjcmVlbkNoYW5nZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgb25GdWxsU2NyZWVuQ2hhbmdlKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21zZnVsbHNjcmVlbmNoYW5nZScsIG9uRnVsbFNjcmVlbkNoYW5nZSk7CiAgICAKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvcmllbnRhdGlvbmNoYW5nZSIsICgpID0+IHsKICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICBzY3JlZW4ub3JpZW50YXRpb24udW5sb2NrKCk7CiAgICAgICAgICByZW1vdmVSb3RhdGVDc3NGYWxsYmFjaygpOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIFBseXIgRXZlbnQgSGFuZGxlcnMKICAgIGZ1bmN0aW9uIGF0dGFjaFBseXJFdmVudHMoKSB7CiAgICAgICAgaWYgKCFwbHlySW5zdGFuY2UpIHJldHVybjsKCiAgICAgICAgcGx5ckluc3RhbmNlLm9uKCdwbGF5aW5nJywgKCkgPT4gbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJykpOwogICAgICAgIHBseXJJbnN0YW5jZS5vbignd2FpdGluZycsICgpID0+IGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpKTsKICAgICAgICBwbHlySW5zdGFuY2Uub24oJ2NhbnBsYXknLCAoKSA9PiBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKSk7CiAgICB9CgogICAgLy8gLS0tIFVJIFJlbmRlcmluZyAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlclBsYXllclVJKGRhdGEpIHsKICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0cmVhbS1jb250ZW50Jyk7CiAgICAgICAgCiAgICAgICAgLy8gUmVuZGVyIHRoZSBtYWluIHN0cnVjdHVyZSB1c2luZyB0aGUgZGF0YQogICAgICAgIGNvbnRlbnREaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdHJlYW0taGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMT4ke3NhZmVIVE1MKGRhdGEubWF0Y2hOYW1lKS50b1VwcGVyQ2FzZSgpfTwvaDE+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWJhZGdlIj48aSBjbGFzcz0iZmEtc29saWQgZmEtY2lyY2xlIj48L2k+IExJVkU8L2Rpdj4gCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJwbGF5ZXItY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDx2aWRlbyBpZD0iJHtQTEFZRVJfSUR9IiBwbGF5c2lubGluZSBjb250cm9scz48L3ZpZGVvPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmlldy1jb3VudGVyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYW1lIiBpZD0idmlld0NoYW5uZWxOYW1lIj5GQU5DT0RFPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmlld3MiIGlkPSJ2aWV3Q291bnQiPjAgVmlld3M8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm90YXRlLWZhbGxiYWNrLW5vdGljZSIgaWQ9InJvdGF0ZU5vdGljZSI+Um90YXRpb24gZmFsbGJhY2sgYWN0aXZlIChpT1MpIH8gdGFwIGV4aXQgdG8gcmV0dXJuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLWNhcmQiPgogICAgICAgICAgICAgICAgPGgyPjxpIGNsYXNzPSJmYS1icmFuZHMgZmEtd2hhdHNhcHAiPjwvaT4gRm9sbG93IHVzIGZvciBVcGRhdGVzICAgISE8L2gyPgogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd2hhdHNhcHAuY29tL2NoYW5uZWwvMDAyOVZhZXlsWVlCUHpqVk5vbVd1WjBUIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciIgY2xhc3M9ImFjdGlvbi1idXR0b24iPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYS1icmFuZHMgZmEtd2hhdHNhcHAiPjwvaT4KICAgICAgICAgICAgICAgICAgICBDbGljayBIZXJlIFRvIEpvaW4gV2hhdHNBcHAgCiAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLWNhcmQiPgogICAgICAgICAgICAgICAgPGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1saW5rIj48L2k+IENvcHkgTGluayAmIFNoYXJlPC9oMj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idXR0b24iIGlkPSJzaGFyZUJ1dHRvbiI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXNoYXJlLW5vZGVzIj48L2k+IENsaWNrIEhlcmUgVG8gU2hhcmUgVGhpcyBQYWdlIExpbms8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJiYWNrLWxpbmsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1hcnJvdy1sZWZ0Ij48L2k+IEJhY2sgdG8gQWxsIFN0cmVhbXMgISE8L2E+CiAgICAgICAgYDsKICAgICAgICAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhcmVCdXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodXJsKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZUJ1dHRvbicpOwogICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBidG4uaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz0iZmEtc29saWQgZmEtY2hlY2siPjwvaT4gTGluayBDb3BpZWQhYDsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdjb3BpZWQnKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gCiAgICAgICAgICAgICAgICB7IGJ0bi5pbm5lckhUTUwgPSBvcmlnaW5hbDsgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcGllZCcpOyB9LCAyMDAwKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgfQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIHN0YXJ0Vmlld0NvdW50ZXIoKTsgLy8gQ2FsbCBjb3VudGVyIGluaXRpYWxpemF0aW9uCiAgICB9CiAgICAKICAgIC8vIC0tLSBNYWluIEluaXRpYWxpemF0aW9uIC0tLQogICAgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVBsYXllcigpIHsKICAgICAgICBjb25zdCB7IG1hdGNoSWQsIGNkbktleSB9ID0gZ2V0TWF0Y2hQYXJhbXMoKTsKICAgICAgICAKICAgICAgICBpZiAoIW1hdGNoSWQgfHwgIWNkbktleSkgewogICAgICAgICAgICAgcmV0dXJuIGRpc3BsYXlFcnJvcigiTWlzc2luZyBtYXRjaCBwYXJhbWV0ZXJzLiBQbGVhc2UgdXNlIGEgbGluayBmcm9tIHRoZSBob21lcGFnZS4iKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbGV0IHN0cmVhbVVybCA9IG51bGw7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoTWF0Y2hEYXRhKG1hdGNoSWQsIGNkbktleSk7CiAgICAgICAgICAgIHN0cmVhbVVybCA9IGRhdGEuc3RyZWFtVXJsOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmVuZGVyIFVJIGJlZm9yZSBzdGFydGluZyBwbGF5ZXIKICAgICAgICAgICAgcmVuZGVyUGxheWVyVUkoZGF0YSk7CgogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHJldHVybiBkaXNwbGF5RXJyb3IoYEZhaWxlZCB0byBsb2FkIG1hdGNoIGRldGFpbHM6ICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBsYXllckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQTEFZRVJfSUQpOwoKICAgICAgICAvLyBQbHlyIENvbmZpZ3VyYXRpb24KICAgICAgICBjb25zdCBwbGF5ZXJDb25maWcgPSB7CiAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlLAogICAgICAgICAgICBwbGF5c2lubGluZTogdHJ1ZSwKICAgICAgICAgICAgbXV0ZWQ6IHRydWUsCiAgICAgICAgICAgIGNvbnRyb2xzOiBbJ3BsYXktbGFyZ2UnLCAncGxheScsICdwcm9ncmVzcycsICdjdXJyZW50LXRpbWUnLCAnbXV0ZScsICd2b2x1bWUnLCAnc2V0dGluZ3MnLCAncGlwJywgJ2Z1bGxzY3JlZW4nXSwKICAgICAgICAgICAgc2V0dGluZ3M6IFsncXVhbGl0eScsICdzcGVlZCcsICdjYXB0aW9ucyddLAogICAgICAgICAgICBzcGVlZDogewogICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IDEsCiAgICAgICAgICAgICAgICBvcHRpb25zOiBbMC41LCAwLjc1LCAxLCAxLjI1LCAxLjUsIDEuNzUsIDJdCiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICAvLyBITFMgSW1wbGVtZW50YXRpb24KICAgICAgICBpZiAoc3RyZWFtVXJsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJy5tM3U4JykgJiYgSGxzLmlzU3VwcG9ydGVkKCkpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIGhsc0luc3RhbmNlID0gbmV3IEhscyh7CiAgICAgICAgICAgICAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsCiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlLAogICAgICAgICAgICAgICAgcmVjb3Zlck1lZGlhRXJyb3I6IHRydWUsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaGxzSW5zdGFuY2UubG9hZFNvdXJjZShzdHJlYW1VcmwpOwogICAgICAgICAgICBobHNJbnN0YW5jZS5hdHRhY2hNZWRpYShwbGF5ZXJFbGVtZW50KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGhsc0luc3RhbmNlLm9uKEhscy5FdmVudHMuTUFOSUZFU1RfUEFSU0VELCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgcXVhbGl0aWVzID0gZGF0YS5sZXZlbHMubWFwKGwgPT4gbC5oZWlnaHQpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIGxldCBhdmFpbGFibGVRdWFsaXRpZXMgPSBbQVVUT19RVUFMSVRZLCAuLi5uZXcgU2V0KHF1YWxpdGllcyldLnNvcnQoKGEsIGIpID0+IGIgLSBhKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRRdWFsaXR5ID0gYXZhaWxhYmxlUXVhbGl0aWVzLmZpbmQocSA9PiBxID09PSA3MjApIHx8IEFVVE9fUVVBTElUWTsgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHBsYXllckNvbmZpZy5xdWFsaXR5ID0gewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRRdWFsaXR5LAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGF2YWlsYWJsZVF1YWxpdGllcywKICAgICAgICAgICAgICAgICAgICBmb3JjZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChuZXdRdWFsaXR5KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UXVhbGl0eSA9PT0gQVVUT19RVUFMSVRZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBobHNJbnN0YW5jZS5jdXJyZW50TGV2ZWwgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxldmVsSW5kZXggPSBobHNJbnN0YW5jZS5sZXZlbHMuZmluZEluZGV4KGxldmVsID0+IGxldmVsLmhlaWdodCA9PT0gbmV3UXVhbGl0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGV2ZWxJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBobHNJbnN0YW5jZS5jdXJyZW50TGV2ZWwgPSBsZXZlbEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKHBseXJJbnN0YW5jZSkgcGx5ckluc3RhbmNlLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIHBseXJJbnN0YW5jZSA9IG5ldyBQbHlyKHBsYXllckVsZW1lbnQsIHBsYXllckNvbmZpZyk7CiAgICAgICAgICAgICAgICBhdHRhY2hQbHlyRXZlbnRzKCk7CiAgICAgICAgICAgICAgICBobHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkxFVkVMX1NXSVRDSEVELCAoKSA9PiBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHBsYXllckVsZW1lbnQucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKCJBdXRvcGxheSBibG9ja2VkL2ZhaWxlZC4gVXNlciBpbnRlcmFjdGlvbiByZXF1aXJlZC4iLCBlKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaGxzSW5zdGFuY2Uub24oSGxzLkV2ZW50cy5FUlJPUiwgZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5mYXRhbCkgewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09IEhscy5FcnJvclR5cGVzLk1FRElBX0VSUk9SKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhsc0luc3RhbmNlLnJlY292ZXJNZWRpYUVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhsc0luc3RhbmNlKSBobHNJbnN0YW5jZS5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvcihgUGxheWJhY2sgZmFpbGVkOiAke2RhdGEucmVhc29ufS4gVHJ5IHJlZnJlc2hpbmcuYCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gRGlyZWN0IE1QNCBvciBvdGhlciBub24tSExTIGZvcm1hdHMKICAgICAgICAgICAgcGxheWVyRWxlbWVudC5zcmMgPSBzdHJlYW1Vcmw7CiAgICAgICAgICAgIGlmIChwbHlySW5zdGFuY2UpIHBseXJJbnN0YW5jZS5kZXN0cm95KCk7CiAgICAgICAgICAgIHBseXJJbnN0YW5jZSA9IG5ldyBQbHlyKHBsYXllckVsZW1lbnQsIHBsYXllckNvbmZpZyk7CiAgICAgICAgICAgIGF0dGFjaFBseXJFdmVudHMoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHBsYXllckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZSkgPT4gewogICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvcigiVGhlIHZpZGVvIGxpbmsgZmFpbGVkIHRvIGxvYWQgb3IgdGhlIGZvcm1hdCBpcyB1bnN1cHBvcnRlZC4iKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBwbHlySW5zdGFuY2UucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKCJBdXRvcGxheSBibG9ja2VkL2ZhaWxlZC4iLCBlKSk7CiAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0gUG9wdXAgJiBTdGFydHVwIExvZ2ljIC0tLQogICAgZnVuY3Rpb24gY2xvc2VQb3B1cEFuZEluaXRpYWxpemVQbGF5ZXIoKSB7CiAgICAgICAgaGlkZVBvcHVwKCk7CiAgICAgICAgCiAgICAgICAgaWYgKCFwbGF5ZXJJbml0aWFsaXplZCkgewogICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLnN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICAgICAgICAgIGluaXRpYWxpemVQbGF5ZXIoKTsKICAgICAgICAgICAgcGxheWVySW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBqb2luTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgCiAgICAgICAgc2V0VGltZW91dChjbG9zZVBvcHVwQW5kSW5pdGlhbGl6ZVBsYXllciwgNTAwKTsgCiAgICB9KTsKICAgIGFscmVhZHlKb2luZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBvcHVwQW5kSW5pdGlhbGl6ZVBsYXllcik7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsKICAgICAgICAvLyBTaG93IHBvcHVwIGZpcnN0CiAgICAgICAgc2hvd1BvcHVwKCk7CiAgICAgICAgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLnN0eWxlLm9wYWNpdHkgPSAnMCc7IC8vIEhpZGUgY29udGFpbmVyIHVudGlsIGluaXRpYWxpemF0aW9uIHN0YXJ0cwogICAgfSk7Cgo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"; 
        
        function decryptAndExecute() {
            try {
                let original = decodeURIComponent(escape(atob(encrypted)));
                document.open();
                document.write(original);
                document.close();
            } catch (e) {
                document.write('<h1 style="color:red; text-align: center; margin-top: 50px;">DECRYPTION ERROR!</h1><p style="text-align: center;">' + e.message + '</p>');
            }
        }
        decryptAndExecute();
    </script>
</body>
    </html>
