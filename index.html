<style>
    .inning-header { 
        padding: 15px; background: #fff; border-bottom: 1px solid #eee; cursor: pointer;
        display: flex; justify-content: space-between; align-items: center;
    }
    .team-title { font-weight: 700; color: #222; font-size: 0.95rem; }
    .score-summary { font-weight: 700; color: #222; }
    .inning-label { font-size: 0.75rem; color: #666; text-transform: uppercase; margin-top: 2px; }
    .inning-content { display: none; background: #fff; }
    .inning-content.active { display: block; }
    .table-pro { width: 100%; border-collapse: collapse; }
    .table-pro th { text-align: left; padding: 10px; font-size: 0.7rem; color: #888; border-bottom: 1px solid #eee; }
    .table-pro td { padding: 12px 10px; font-size: 0.82rem; border-bottom: 1px solid #f9f9f9; }
    .bowling-header { background: #f8f9fa; padding: 10px 15px; font-weight: 700; font-size: 0.75rem; border-top: 8px solid #f0f3f2; }
</style>

<script>
    const API_KEY = "3b6c7e60-9294-427b-b873-e5912320fab1"; 

    async function openModal(m) {
        const modal = document.getElementById('modal');
        const area = document.getElementById('scorecard-area');
        modal.style.display = 'flex';
        document.getElementById('m-header-title').innerText = `${m.t1} v ${m.t2}`;
        area.innerHTML = '<div class="loader"></div>';

        try {
            const res = await fetch(`https://api.cricapi.com/v1/match_scorecard?apikey=${API_KEY}&id=${m.id}`);
            const json = await res.json();
            const data = json.data;

            if (!data || !data.scorecard) {
                area.innerHTML = "<p style='padding:40px; text-align:center;'>Scorecard not available.</p>";
                return;
            }

            let html = `<div style="background:#e3f2fd; color:#1976d2; padding:10px 15px; font-weight:600; font-size:0.85rem;">${m.status}</div>`;

            // Scorecard mapping with Inning Labels
            data.scorecard.forEach((inning, idx) => {
                const isFirstInning = idx === 0;
                const totalR = inning.totals?.R || 0;
                const totalW = inning.totals?.W || 0;
                const totalOV = inning.totals?.OV || 0;
                const extras = typeof inning.extras === 'object' ? (inning.extras.r || 0) : (inning.extras || 0);

                // Batter Rows
                let batRows = (inning.batting || []).map(p => `
                    <tr>
                        <td style="width:50%"><div style="color:#1976d2; font-weight:600;">${p.batsman?.name || 'Batsman'}</div>
                        <div style="font-size:0.7rem; color:#888;">${p['dismissal-text'] || 'not out'}</div></td>
                        <td style="font-weight:700">${p.r || 0}</td><td>${p.b || 0}</td><td>${p['4s'] || 0}</td><td>${p['6s'] || 0}</td><td>${p.sr || 0}</td>
                    </tr>
                `).join('');

                // Bowler Rows
                let bowlRows = (inning.bowling || []).map(b => `
                    <tr>
                        <td style="width:50%; font-weight:600;">${b.bowler?.name || 'Bowler'}</td>
                        <td>${b.o || 0}</td><td>${b.m || 0}</td><td>${b.r || 0}</td><td style="font-weight:700">${b.w || 0}</td><td>${b.er || 0}</td>
                    </tr>
                `).join('');

                html += `
                    <div class="inning-accordion">
                        <div class="inning-header" onclick="toggleInning(${idx})">
                            <div>
                                <div class="team-title">${inning.inning}</div>
                                <div class="inning-label">${isFirstInning ? '1st Inning' : '2nd Inning'}</div>
                            </div>
                            <div class="score-summary">${totalR}-${totalW} (${totalOV}) â–¾</div>
                        </div>
                        <div id="inning-content-${idx}" class="inning-content ${idx === data.scorecard.length - 1 ? 'active' : ''}">
                            <table class="table-pro">
                                <thead><tr><th>Batter</th><th>R</th><th>B</th><th>4s</th><th>6s</th><th>SR</th></tr></thead>
                                <tbody>${batRows}</tbody>
                            </table>
                            <div style="padding:12px 15px; font-size:0.85rem; border-top:1px solid #eee;"><strong>Extras:</strong> ${extras}</div>
                            <div class="bowling-header">BOWLING</div>
                            <table class="table-pro">
                                <thead><tr><th>Bowler</th><th>O</th><th>M</th><th>R</th><th>W</th><th>Eco</th></tr></thead>
                                <tbody>${bowlRows}</tbody>
                            </table>
                        </div>
                    </div>
                `;
            });
            area.innerHTML = html;
        } catch (e) { area.innerHTML = "<p style='padding:20px;'>Error loading data.</p>"; }
    }

    function toggleInning(id) {
        const content = document.getElementById(`inning-content-${id}`);
        content.classList.toggle('active');
    }
</script>
























