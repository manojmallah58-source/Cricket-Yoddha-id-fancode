<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Pro - Live Match Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0b0f1a;
            --card-dark: #161d2f;
            --primary: #f59e0b; /* Golden Yellow like CREX */
            --text-gray: #94a3b8;
            --success: #10b981;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            background-color: var(--bg-dark);
            color: var(--white);
            padding: 15px;
            max-width: 500px; /* Mobile focused */
            margin: 0 auto;
        }

        /* Header Style */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0 20px;
            border-bottom: 1px solid #1e293b;
        }

        .refresh-btn {
            background: var(--primary);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            font-size: 12px;
            transition: transform 0.2s;
        }
        .refresh-btn:active { transform: scale(0.9); }

        /* Loader */
        #loader { display: none; text-align: center; padding: 20px; color: var(--primary); }

        /* Match Card - CREX Style */
        .match-card {
            background: var(--card-dark);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: background 0.3s;
            border: 1px solid transparent;
        }
        .match-card:hover { border-color: #334155; }

        .venue-info { font-size: 11px; color: var(--text-gray); margin-bottom: 10px; display: block; }

        .team-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
        }

        .team-meta { display: flex; align-items: center; gap: 12px; }

        .team-flag {
            width: 24px; height: 24px;
            border-radius: 50%;
            background: #334155;
            display: flex; align-items: center; justify-content: center;
            font-size: 10px; font-weight: bold;
        }

        .team-name { font-weight: 600; font-size: 15px; }
        .score-text { font-weight: 700; font-size: 16px; }

        .match-result {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #1e293b;
            color: var(--success);
            font-size: 13px;
            font-weight: 500;
        }

        /* Modal / Scorecard View */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 1000;
            display: none; flex-direction: column;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--card-dark);
        }

        .score-table {
            width: 100%; border-collapse: collapse; margin-top: 20px;
        }
        .score-table th { text-align: left; padding: 10px; color: var(--text-gray); font-size: 12px; border-bottom: 1px solid #1e293b; }
        .score-table td { padding: 12px 10px; font-size: 13px; border-bottom: 1px solid #0f172a; }

        .bat-name { color: var(--primary); font-weight: 600; }
    </style>
</head>
<body>

    <div class="app-header">
        <h2 style="font-weight: 800;">CREX <span style="color:var(--primary)">PRO</span></h2>
        <button class="refresh-btn" onclick="fetchScores()">REFRESH</button>
    </div>

    <div id="loader">Updating Live Scores...</div>
    <div id="match-container"></div>

    <div id="scorecardModal" class="modal">
        <div class="modal-header">
            <button onclick="closeModal()" style="background:none; border:none; color:white; font-size:24px;">←</button>
            <h3 id="m-title">Match Scorecard</h3>
        </div>
        <div style="padding: 15px;">
            <div id="m-summary" style="padding:15px; background:var(--card-dark); border-radius:12px; margin-bottom:20px;"></div>
            
            <h4>Batting Stats</h4>
            <table class="score-table">
                <thead>
                    <tr>
                        <th>BATSMAN</th>
                        <th>R</th>
                        <th>B</th>
                        <th>4s</th>
                        <th>6s</th>
                        <th>SR</th>
                    </tr>
                </thead>
                <tbody id="player-rows">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        const API_KEY = "71a4d725-d2d8-4411-9d5b-fc7c55ccf9e5";
        const API_URL = `https://api.cricapi.com/v1/cricScore?apikey=${API_KEY}`;

        async function fetchScores() {
            const container = document.getElementById('match-container');
            const loader = document.getElementById('loader');
            container.innerHTML = '';
            loader.style.display = 'block';

            try {
                const response = await fetch(API_URL);
                const result = await response.json();
                loader.style.display = 'none';

                if (result.status !== "success") throw new Error("API Error");

                result.data.forEach(match => {
                    const card = document.createElement('div');
                    card.className = 'match-card';
                    card.onclick = () => openMatchDetail(match);

                    card.innerHTML = `
                        <span class="venue-info">${match.series} • ${match.matchType.toUpperCase()}</span>
                        <div class="team-row">
                            <div class="team-meta">
                                <div class="team-flag">${match.t1.substring(0,2).toUpperCase()}</div>
                                <span class="team-name">${match.t1}</span>
                            </div>
                            <span class="score-text">${match.t1s || '0/0'}</span>
                        </div>
                        <div class="team-row">
                            <div class="team-meta">
                                <div class="team-flag" style="background:var(--primary); color:black;">${match.t2.substring(0,2).toUpperCase()}</div>
                                <span class="team-name">${match.t2}</span>
                            </div>
                            <span class="score-text">${match.t2s || '0/0'}</span>
                        </div>
                        <div class="match-result">${match.status}</div>
                    `;
                    container.appendChild(card);
                });
            } catch (e) {
                loader.innerText = "Error loading scores. Try again.";
            }
        }

        function openMatchDetail(match) {
            document.getElementById('m-title').innerText = `${match.t1} vs ${match.t2}`;
            document.getElementById('m-summary').innerHTML = `
                <div style="text-align:center">
                    <p style="color:var(--text-gray); font-size:12px">${match.series}</p>
                    <h2 style="margin:10px 0">${match.t1s || '0'} - ${match.t2s || '0'}</h2>
                    <p style="color:var(--success)">${match.status}</p>
                </div>
            `;

            // Dummy Player Data (Since API requires higher plan for live players)
            const players = [
                { name: "Player 1", r: 45, b: 30, f: 4, s: 2, sr: 150.0 },
                { name: "Player 2", r: 12, b: 15, f: 1, s: 0, sr: 80.0 },
                { name: "Player 3", r: 84, b: 55, f: 8, s: 4, sr: 152.7 }
            ];

            const tbody = document.getElementById('player-rows');
            tbody.innerHTML = players.map(p => `
                <tr>
                    <td class="bat-name">${p.name} <br> <small style="color:gray">not out</small></td>
                    <td><b>${p.r}</b></td>
                    <td>${p.b}</td>
                    <td>${p.f}</td>
                    <td>${p.s}</td>
                    <td>${p.sr}</td>
                </tr>
            `).join('');

            document.getElementById('scorecardModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('scorecardModal').style.display = 'none';
        }

        fetchScores();
    </script>
</body>
</html>

